!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Rankr={})}(this,function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n="__lodash_hash_undefined__",i=1/0,r="[object Function]",o="[object GeneratorFunction]",a="[object Symbol]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,s=/^\./,f=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,p=/^\[object .+?Constructor\]$/,h="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,y=h||d||Function("return this")();var _=Array.prototype,e=Function.prototype,h=Object.prototype,d=y["__core-js_shared__"],v=(d=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",g=e.toString,b=h.hasOwnProperty,m=h.toString,j=RegExp("^"+g.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=y.Symbol,w=_.splice,O=E(y,"Map"),x=E(Object,"create"),h=h?h.prototype:void 0,S=h?h.toString:void 0;function T(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function $(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function k(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function N(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function P(t,e){for(var r,n=0,o=(e=function(t,e){if(M(t))return!1;var r=typeof t;if("number"==r||"symbol"==r||"boolean"==r||null==t||D(t))return!0;return u.test(t)||!c.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:M(r=e)?r:A(r)).length;null!=t&&n<o;)t=t[function(t){if("string"==typeof t||D(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}(e[n++])];return n&&n==o?t:void 0}function C(t){var e;return B(t)&&(e=t,!(v&&v in e))&&(function(t){t=B(t)?m.call(t):"";return t==r||t==o}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?j:p).test(function(t){if(null!=t){try{return g.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function F(t,e){var r,n=t.__data__;return("string"==(t=typeof(r=e))||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==r:null===r)?n["string"==typeof e?"string":"hash"]:n.map}function E(t,e){e=e,e=null==(t=t)?void 0:t[e];return C(e)?e:void 0}T.prototype.clear=function(){this.__data__=x?x(null):{}},T.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},T.prototype.get=function(t){var e=this.__data__;if(x){var r=e[t];return r===n?void 0:r}return b.call(e,t)?e[t]:void 0},T.prototype.has=function(t){var e=this.__data__;return x?void 0!==e[t]:b.call(e,t)},T.prototype.set=function(t,e){return this.__data__[t]=x&&void 0===e?n:e,this},$.prototype.clear=function(){this.__data__=[]},$.prototype.delete=function(t){var e=this.__data__;return!((t=N(e,t))<0)&&(t==e.length-1?e.pop():w.call(e,t,1),!0)},$.prototype.get=function(t){var e=this.__data__;return(t=N(e,t))<0?void 0:e[t][1]},$.prototype.has=function(t){return-1<N(this.__data__,t)},$.prototype.set=function(t,e){var r=this.__data__,n=N(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},k.prototype.clear=function(){this.__data__={hash:new T,map:new(O||$),string:new T}},k.prototype.delete=function(t){return F(this,t).delete(t)},k.prototype.get=function(t){return F(this,t).get(t)},k.prototype.has=function(t){return F(this,t).has(t)},k.prototype.set=function(t,e){return F(this,t).set(t,e),this};var A=R(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(D(t))return S?S.call(t):"";var e=t+"";return"0"==e&&1/t==-i?"-0":e}(e);var o=[];return s.test(t)&&o.push(""),t.replace(f,function(t,e,r,n){o.push(r?n.replace(l,"$1"):e||t)}),o});function R(n,o){if("function"!=typeof n||o&&"function"!=typeof o)throw new TypeError("Expected a function");function i(){var t=arguments,e=o?o.apply(this,t):t[0],r=i.cache;return r.has(e)?r.get(e):(t=n.apply(this,t),i.cache=r.set(e,t),t)}return i.cache=new(R.Cache||k),i}R.Cache=k;var M=Array.isArray;function B(t){var e=typeof t;return t&&("object"==e||"function"==e)}function D(t){return"symbol"==typeof t||!!(e=t)&&"object"==typeof e&&m.call(t)==a;var e}var G=function(t,e,r){return void 0===(e=null==t?void 0:P(t,e))?r:e};function I(t,e){return!0===G(t,e.key)?1:0}function q(t,e){return G(t,e.key)}var z,H,J=function(){return(J=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};(h=z=z||{}).asc="asc",h.desc="desc",(h=H=H||{}).increasing="increasing",h.decreasing="decreasing";var K={sort:z.desc};function L(t){return void 0===t}function Q(t){return"function"==typeof t}function U(t,e){if(Q(e.transform))return e.transform(t,e);var r,n=G(t,e.key);return"number"!=typeof(r=n)&&"[object Number]"!==Object.prototype.toString.call(r)||!Number.isFinite(Number(r))?!0===(n=n)||!1===n||"[object Boolean]"===Object.prototype.toString.call(n)?I(t,e):void 0:q(t,e)}function V(t,e){!function(t){for(var e=[],r=1,n=0,o=t;n<o.length;n++)(i=o[n]).weight?r-=i.weight:e.push(i);for(var i,a=r/e.length,c=0,u=e;c<u.length;c++)(i=u[c]).weight=a,r-=i.weight}(e);for(var r,n,o,i,a=0,c=e;a<c.length;a++){var u=c[a];if(!function(e){return["min","max","distance"].every(function(t){return e.hasOwnProperty(t)})}(u)){for(var s=0,f=t;s<f.length;s++){var l=f[s];i=U(i=l,o=u),(L(o.min)||i<o.min)&&(o.min=i),i=U(i=l,l=u),(L(l.max)||i>l.max)&&(l.max=i)}n=void 0,n=(r=u).max-r.min,isNaN(n)||(r.distance=n)}}}function W(t){var e=null!=t?t:[];return{criterias:function(){return e},configureCriterias:function(t){V(t,e)}}}function X(){return{scores:function(t,e,r){var n,a;return a=t,e=e.map(function(t){for(var e=0,r=0,n=a;r<n.length;r++){var o=n[r],i=U(t,o);o.strategy===H.increasing&&(e+=(i-o.min)/o.distance*o.weight),o.strategy===H.decreasing&&(e+=(o.max-i)/o.distance*o.weight),Q(o.strategy)&&(e+=o.strategy(t,o))}return{score:e,record:t}}),null===(n=r).sort?e:e.sort(function(t,e){return n.sort===z.desc?e.score-t.score:n.sort===z.asc?t.score-e.score:void 0})}}}t.booleanTransformer=I,t.dateTransformer=function(t,e){return e=new Date(G(t,e.key)).valueOf(),isNaN(e)?0:e},t.default=function(t,e,r){var n,o,i=W(e),e=(n=null!=(t=t)?t:[],{records:function(){return n}}),t=(r=r,o=J(J({},K),null!=r?r:{}),{config:function(){return o}}),r=X();return i.configureCriterias(e.records()),i=i.criterias(),e=e.records(),t=t.config(),r.scores(i,e,t)},t.numberTransformer=q,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
