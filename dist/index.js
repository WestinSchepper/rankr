!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Rankr=e()}(this,function(){"use strict";var o,c,a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};(m=o=o||{}).asc="asc",m.desc="desc",(j=c=c||{}).increasing="increasing",j.decreasing="decreasing";var u={sort:o.desc};function p(t){return void 0===t}function s(t){return"function"==typeof t}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r="__lodash_hash_undefined__",i=1/0,n="[object Function]",f="[object GeneratorFunction]",l="[object Symbol]",h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,y=/^\./,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,e="object"==typeof t&&t&&t.Object===Object&&t,b="object"==typeof self&&self&&self.Object===Object&&self,m=e||b||Function("return this")();var j=Array.prototype,t=Function.prototype,e=Object.prototype,b=m["__core-js_shared__"],w=(b=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",O=t.toString,x=e.hasOwnProperty,S=e.toString,$=RegExp("^"+O.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),e=m.Symbol,T=j.splice,C=I(m,"Map"),F=I(Object,"create"),e=e?e.prototype:void 0,N=e?e.toString:void 0;function P(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function k(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function E(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function A(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function R(t,e){for(var n,r=0,o=(e=function(t,e){if(z(t))return!1;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||H(t))return!0;return d.test(t)||!h.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:z(n=e)?n:M(n)).length;null!=t&&r<o;)t=t[function(t){if("string"==typeof t||H(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}(e[r++])];return r&&r==o?t:void 0}function B(t){var e;return D(t)&&(e=t,!(w&&w in e))&&(function(t){t=D(t)?S.call(t):"";return t==n||t==f}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?$:g).test(function(t){if(null!=t){try{return O.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function G(t,e){var n,r=t.__data__;return("string"==(t=typeof(n=e))||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function I(t,e){e=e,e=null==(t=t)?void 0:t[e];return B(e)?e:void 0}P.prototype.clear=function(){this.__data__=F?F(null):{}},P.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},P.prototype.get=function(t){var e=this.__data__;if(F){var n=e[t];return n===r?void 0:n}return x.call(e,t)?e[t]:void 0},P.prototype.has=function(t){var e=this.__data__;return F?void 0!==e[t]:x.call(e,t)},P.prototype.set=function(t,e){return this.__data__[t]=F&&void 0===e?r:e,this},k.prototype.clear=function(){this.__data__=[]},k.prototype.delete=function(t){var e=this.__data__;return!((t=A(e,t))<0)&&(t==e.length-1?e.pop():T.call(e,t,1),!0)},k.prototype.get=function(t){var e=this.__data__;return(t=A(e,t))<0?void 0:e[t][1]},k.prototype.has=function(t){return-1<A(this.__data__,t)},k.prototype.set=function(t,e){var n=this.__data__,r=A(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},E.prototype.clear=function(){this.__data__={hash:new P,map:new(C||k),string:new P}},E.prototype.delete=function(t){return G(this,t).delete(t)},E.prototype.get=function(t){return G(this,t).get(t)},E.prototype.has=function(t){return G(this,t).has(t)},E.prototype.set=function(t,e){return G(this,t).set(t,e),this};var M=q(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(H(t))return N?N.call(t):"";var e=t+"";return"0"==e&&1/t==-i?"-0":e}(e);var o=[];return y.test(t)&&o.push(""),t.replace(_,function(t,e,n,r){o.push(n?r.replace(v,"$1"):e||t)}),o});function q(r,o){if("function"!=typeof r||o&&"function"!=typeof o)throw new TypeError("Expected a function");function i(){var t=arguments,e=o?o.apply(this,t):t[0],n=i.cache;return n.has(e)?n.get(e):(t=r.apply(this,t),i.cache=n.set(e,t),t)}return i.cache=new(q.Cache||E),i}q.Cache=E;var z=Array.isArray;function D(t){var e=typeof t;return t&&("object"==e||"function"==e)}function H(t){return"symbol"==typeof t||!!(e=t)&&"object"==typeof e&&S.call(t)==l;var e}var J=function(t,e,n){return void 0===(e=null==t?void 0:R(t,e))?n:e};function K(t,e){var n=e.key,e=e.transform;return s(e)?e(t):"number"!=typeof(e=J(t,n))&&"[object Number]"!==Object.prototype.toString.call(e)||!Number.isFinite(Number(e))?!0===(e=J(t,n))||!1===e||"[object Boolean]"===Object.prototype.toString.call(e)?!0===J(t,n)?1:0:void 0:J(t,n)}function L(t,e){!function(t){for(var e=[],n=1,r=0,o=t;r<o.length;r++)(i=o[r]).weight?n-=i.weight:e.push(i);for(var i,a=n/e.length,c=0,u=e;c<u.length;c++)(i=u[c]).weight=a,n-=i.weight}(e);for(var n,r,o,i,a=0,c=e;a<c.length;a++){var u=c[a];if(!function(e){return["min","max","distance"].every(function(t){return e.hasOwnProperty(t)})}(u)){for(var s=0,f=t;s<f.length;s++){var l=f[s];i=K(i=l,o=u),(p(o.min)||i<o.min)&&(o.min=i),i=K(i=l,l=u),(p(l.max)||i>l.max)&&(l.max=i)}r=void 0,r=(n=u).max-n.min,isNaN(r)||(n.distance=r)}}}function Q(t){var e=null!=t?t:[];return{criterias:function(){return e},configureCriterias:function(t){L(t,e)}}}function U(){return{scores:function(t,e,n){var r,a;return a=t,e=e.map(function(t){for(var e=0,n=0,r=a;n<r.length;n++){var o=r[n],i=K(t,o);o.strategy===c.increasing&&(e+=(i-o.min)/o.distance*o.weight),o.strategy===c.decreasing&&(e+=(o.max-i)/o.distance*o.weight),s(o.strategy)&&(e+=o.strategy(t,o))}return{score:e,record:t}}),null===(r=n).sort?e:e.sort(function(t,e){return r.sort===o.desc?e.score-t.score:r.sort===o.asc?t.score-e.score:void 0})}}}return function(t,e,n){var r,o,i=Q(e),e=(r=null!=(t=t)?t:[],{records:function(){return r}}),t=(n=n,o=a(a({},u),null!=n?n:{}),{config:function(){return o}}),n=U();return i.configureCriterias(e.records()),i=i.criterias(),e=e.records(),t=t.config(),n.scores(i,e,t)}});
//# sourceMappingURL=index.js.map
