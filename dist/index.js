!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).Rankr=n()}(this,function(){"use strict";var i,s,r,c=function(){return(c=Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i]);return r}).apply(this,arguments)};(r=i=i||{}).asc="asc",r.desc="desc",(r=s=s||{}).increasing="increasing",r.decreasing="decreasing";var a={sort:i.desc};function l(r){return void 0===r}function u(r){return"function"==typeof r}function d(r,n){var e=n.key,n=n.transform;return u(n)?n(r):"number"!=typeof(n=r[e])&&"[object Number]"!==Object.prototype.toString.call(n)||!Number.isFinite(Number(n))?!0===(n=r[e])||!1===n||"[object Boolean]"===Object.prototype.toString.call(n)?!0===r[e]?1:0:void 0:r[e]}function e(r,n){!function(r){for(var n=[],e=1,t=0,i=r;t<i.length;t++)(o=i[t]).weight?e-=o.weight:n.push(o);for(var o,c=e/n.length,s=0,a=n;s<a.length;s++)(o=a[s]).weight=c,e-=o.weight}(n);for(var e,t,i,o,c=0,s=n;c<s.length;c++){var a=s[c];if(!function(n){return["min","max","distance"].every(function(r){return n.hasOwnProperty(r)})}(a)){for(var u=0,f=r;u<f.length;u++){var g=f[u];o=d(o=g,i=a),(l(i.min)||o<i.min)&&(i.min=o),o=d(o=g,g=a),(l(g.max)||o>g.max)&&(g.max=o)}t=void 0,t=(e=a).max-e.min,isNaN(t)||(e.distance=t)}}}function f(r){var n=null!=r?r:[];return{criterias:function(){return n},configureCriterias:function(r){e(r,n)}}}function g(){return{scores:function(r,n,e){var t,c;return c=r,n=n.map(function(r){for(var n=0,e=0,t=c;e<t.length;e++){var i=t[e],o=d(r,i);i.strategy===s.increasing&&(n+=(o-i.min)/i.distance*i.weight),i.strategy===s.decreasing&&(n+=(i.max-o)/i.distance*i.weight),u(i.strategy)&&(n+=i.strategy(r,i))}return{score:n,record:r}}),null===(t=e).sort?n:n.sort(function(r,n){return t.sort===i.desc?n.score-r.score:t.sort===i.asc?r.score-n.score:void 0})}}}return function(r,n,e){var t,i,o=f(n),n=(t=null!=(r=r)?r:[],{records:function(){return t}}),r=(e=e,i=c(c({},a),null!=e?e:{}),{config:function(){return i}}),e=g();return o.configureCriterias(n.records()),o=o.criterias(),n=n.records(),r=r.config(),e.scores(o,n,r)}});
//# sourceMappingURL=index.js.map
